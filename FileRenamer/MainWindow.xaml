<Window
	x:Class="FileRenamer.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:a="using:FileRenamer.Core.Jobs.FileActions"
	xmlns:comp="using:FileRenamer.Views.Components"
	xmlns:ut="using:FileRenamer.UserControls.Toolbar" >

	<Grid Padding="{StaticResource SmallLeftTopRightBottomMargin}" ColumnSpacing="{StaticResource MediumSpacing}" 
		  Background="{StaticResource WindowBackgroundBrush}" BorderBrush="{StaticResource WindowBorderBrush}" BorderThickness="1" >
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="Auto" />
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>

		<!-- Left-hand side panel -->
		<Grid Grid.Column="0" MinWidth="500" MaxWidth="800" RowSpacing="{StaticResource MediumSpacing}" >
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<ut:Toolbar Grid.Row="0" >
				<ut:ToolbarGroup Header="Project" >
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.NewProjectCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.LoadProjectCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.SaveProjectCommand}" />
				</ut:ToolbarGroup>
				<ut:ToolbarGroup Header="Management" >
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.MoveUpActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.MoveDownActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.EditActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.DuplicateActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.RemoveActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.RemoveAllActionsCommand}" />
				</ut:ToolbarGroup>
				<ut:ToolbarGroup Header="Actions" >
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.AddInsertActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.AddRemoveActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.AddInsertCounterActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.AddReplaceActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.AddConvertCaseActionCommand}" />
					<ut:ToolbarButton ItemSize="Medium" Command="{x:Bind ViewModel.AddMoveStringActionCommand}" />
				</ut:ToolbarGroup>
			</ut:Toolbar>

			<!-- Action list view -->
			<ListView Grid.Row="1" CornerRadius="4" Background="#3888" CanReorderItems="True" SelectionMode="Single" AllowDrop="True"
					  ItemsSource="{x:Bind ViewModel.Project.Jobs, Mode=OneWay}" 
					  SelectedItem="{x:Bind ViewModel.SelectedAction, Mode=TwoWay}" SelectedIndex="{x:Bind ViewModel.SelectedIndex, Mode=TwoWay}" >
				<ItemsControl.ItemTemplate>
					<DataTemplate x:DataType="a:RenameActionBase" >
						<CheckBox Margin="{StaticResource XSmallLeftMargin}" FontSize="12" VerticalContentAlignment="Center"
								  IsChecked="{x:Bind IsEnabled, Mode=TwoWay}" Content="{x:Bind Description}" />
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ListView>

			<!-- Test lab -->
			<StackPanel Grid.Row="2" Spacing="{StaticResource XXSmallSpacing}" >
				<TextBox Text="{x:Bind ViewModel.TestInput, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Background="Transparent"
						 PlaceholderText="  Input a test text here" PlaceholderForeground="Gray" IsSpellCheckEnabled="False" IsTextPredictionEnabled="False" />
				<TextBox Text="{x:Bind ViewModel.TestOutput, Mode=OneWay}" Background="Transparent" IsReadOnly="True" IsSpellCheckEnabled="False" />
			</StackPanel>

		</Grid>

		<!-- Right-hand side panel -->
		<Grid Grid.Column="1" RowSpacing="{StaticResource SmallSpacing}" >
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<Grid Grid.Row="0" >
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<TextBox Grid.Column="0" Header="Work folder" Text="{x:Bind ViewModel.Project.Folder.Path, Mode=OneWay}" IsReadOnly="True" />
				<Button  Grid.Column="1" VerticalAlignment="Bottom" Margin="{StaticResource SmallLeftMargin}" Width="80" Height="32" Command="{x:Bind ViewModel.PickFolderCommand}" >
					<Viewbox Width="16" >
						<SymbolIcon Symbol="Folder" />
					</Viewbox>
				</Button>
			</Grid>

			<!--<RadioButtons MaxColumns="3" Header="Rename" SelectedIndex="{x:Bind ViewModel.Scope, Mode=TwoWay, Converter={StaticResource IntToScopeConverter}}" >
				<x:String>Files only</x:String>
				<x:String>Folders only</x:String>
				<x:String>Files and folders</x:String>
			</RadioButtons>-->

			<Expander Grid.Row="2" HorizontalAlignment="Stretch" VerticalAlignment="Top" Header="Live preview"
					  IsExpanded="{x:Bind ViewModel.ShowLivePreview, Mode=TwoWay}" HorizontalContentAlignment="Stretch" >

				<comp:FolderView Items="{x:Bind ViewModel.Preview, Mode=OneWay}" />

			</Expander>

			<SplitButton Grid.Row="9" VerticalAlignment="Bottom" HorizontalAlignment="Right" Padding="24 12"
						 Margin="{StaticResource MediumTopMargin}"
						 Command="{x:Bind ViewModel.DoItCommand}" >

				<StackPanel Orientation="Horizontal" Spacing="{StaticResource XSmallSpacing}" >
					<Viewbox Width="16" Height="16" >
						<FontIcon Glyph="&#xF5B0;" />
					</Viewbox>
					<TextBlock HorizontalAlignment="Center" Text="Go" />
				</StackPanel>

				<SplitButton.Flyout>
					<MenuFlyout Placement="Bottom" >
						<MenuFlyoutItem Text="Simulate" Padding="8 8" >
							<MenuFlyoutItem.Icon>
								<SymbolIcon Symbol="Play" />
							</MenuFlyoutItem.Icon>
						</MenuFlyoutItem>
					</MenuFlyout>
				</SplitButton.Flyout>
			</SplitButton>

		</Grid>

		<ContentDialog Name="dialog" Title="{Binding DialogTitle, Mode=OneTime}" Content="{Binding}" Padding="{StaticResource SmallBottomMargin}" 
					   PrimaryButtonText="add" IsPrimaryButtonEnabled="{Binding IsValid, Mode=OneWay}" 
					   CloseButtonText="cancel" DefaultButton="Primary" />

	</Grid>
</Window>